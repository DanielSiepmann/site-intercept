{% extends 'base.html.twig' %}

{% set active = 'docsDeployments' %}

{% block title %}Documentation deployments{% endblock %}

{% block headline %}
    <h1>Deployed documentation</h1>
{% endblock %}

{# flash messages on this page are NOT escaped !#}
{% block flashMessages %}
    {% for label, messages in app.flashes %}
        {% for message in messages %}
            <div class="alert alert-{{ label }}">
                {{ message | raw}}
            </div>
        {% endfor %}
    {% endfor %}
{% endblock %}

{% block content %}
   <h2>
        Are you sure you want to delete this entry?
    </h2>
    <table class="table table-sm table-striped table-bordered">
        <thead>
        <tr>
            <th>Id</th>
            <th>Repository URL</th>
            <th>Package Name</th>
            <th>Type</th>
            <th>Branch</th>
            <th>Target Directory</th>
            <th>Created at</th>
            <th>Last rendered at</th>
        </tr>
        </thead>
        <tbody>
            <tr>
                <td>{{ deployment.id }}</td>
                <td><a href="{{ deployment.repositoryUrl }}">{{ deployment.repositoryUrl }}</a></td>
                <td>{{ deployment.packageName }}</td>
                <td>{{ deployment.typeLong }}</td>
                <td>{{ deployment.branch }}</td>
                <td></td>
                <td>
                    <a href="{{ docsLiveServer }}/{{ deployment.typeShort }}/{{ deployment.packageName }}/{{ deployment.targetBranchDirectory }}">
                        {{ deployment.targetBranchDirectory }}
                    </a>
                </td>
                <td>
                    <span data-processor="localdate" data-value="{{ deployment.createdAt|date('Y-m-d\\TH:i:sP', "UTC") }}">
                        {{ deployment.createdAt|date('Y-m-d\\TH:i:sP', "UTC") }}
                    </span>
                </td>
                <td>
                    <span data-processor="localdate" data-value="{{ deployment.lastRenderedAt|date('Y-m-d\\TH:i:sP', "UTC") }}">
                        {{ deployment.lastRenderedAt|date('Y-m-d\\TH:i:sP', "UTC") }}
                    </span>
                </td>
            </tr>
        </tbody>
    </table>

    <a href="{{ path('admin_docs_deployments') }}">
        <button class="btn btn-success">No, take me back</button>
    </a>
    <a href="{{ path('admin_docs_deployments_delete_action', {'documentationJarId': deployment.getId() }) }}">
        <button class="btn btn-danger">Yes, delete this entry</button>
    </a>

{% endblock %}
